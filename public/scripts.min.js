(()=>{const e=e=>{e.addEventListener("click",()=>{window.location=e.dataset.href})};let t=document.querySelectorAll(".fakeHref");t&&t.forEach(t=>{e(t)});let n=document.querySelectorAll(".infiniteZap");n&&n.forEach(t=>{new IntersectionObserver(n=>{if(!0===n[0].isIntersecting){let n=new XMLHttpRequest,s=t.previousElementSibling.cloneNode();n.responseType="json",n.onreadystatechange=(()=>{if(4===n.readyState){if(!n.response[0])return void t.remove();s.src="images/uploads/"+n.response[0].thumbnail,s.alt=n.response[0].title;let a=s.dataset.href.split("/");a[a.length-1]=n.response[0].id,s.dataset.href=a.join("/"),e(s),t.parentElement.insertBefore(s,t),t.dataset.latestzapid=n.response[0].id}}),n.open("GET","/zap/infinite/"+t.dataset.type+"/"+t.dataset.latestzapid,!0),n.send()}},{threshold:[1]}).observe(t)})})();