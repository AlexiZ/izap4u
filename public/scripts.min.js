const checkVisible=e=>{let t=e.getBoundingClientRect(),a=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-a>=0)},makeItLoadable=e=>{"true"!==e.dataset.visible||checkVisible(e)||(e.dataset.visible="false"),"false"===e.dataset.visible&&checkVisible(e)&&(e.dataset.visible="true")};(()=>{let e=document.querySelectorAll(".fakeHref");e&&e.forEach(e=>{e.addEventListener("click",()=>{window.location=e.dataset.href})});let t=document.querySelectorAll(".infiniteScroll"),a=new XMLHttpRequest;t&&window.addEventListener("scroll",()=>{t.forEach(e=>{if(a.readyState>0&&a.readyState<4)return;if(!(e.dataset.visible&&e.dataset.callable&&e.dataset.type&&e.dataset.zapidfrom))return;makeItLoadable(e);let t="/zap/infinite/"+e.dataset.type+"/"+e.dataset.zapidfrom;"true"===e.dataset.visible&&"true"===e.dataset.callable&&(4===a.readyState&&(a=new XMLHttpRequest,e.dataset.callable="false"),0===a.readyState&&(a.responseType="json",a.onreadystatechange=(()=>{if(4===a.readyState){let t=a.response[0],l=document.createElement("img");t&&(l.src="images/uploads/"+t.thumbnail,e.appendChild(l)),e.dataset.callable="true"}}),a.open("GET",t,!0),a.send()))})})})();